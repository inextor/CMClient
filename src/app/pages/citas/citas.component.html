<app-header title="Citas {{paciente.nombre}} {{doctor.nombre}}"></app-header>

<div class="container">


	<!-- <ion-searchbar type="search" position="floating" (change)="changeSearch($event)" ionInput="changeSearch($event)"></ion-searchbar>
	<div class="form-group">
		<label color="primary">Busqueda:</label>
		<input type="search" position="floating" (change)="changeSearch($event)" ionInput="changeSearch($event)">
		ion-date type="" position="floating" (change)="changeSearch($event)" ionInput="changeSearch($event)"></ion-date
	</div> -->

	<div *ngIf="is_loading">
		<div class="spinner-border" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
	<input type="text"  (change)="changeSearch($event)" ionInput="changeSearch($event)">
	<select (change)="segmentChanged($event)">
			<option  value="dogs">
			  <label>Pendientes</label>
			</option>
			<option  value="cats">
			  <label>Cats</label>
			</option>
	</select>
	<table class="basica">
		<thead>
			<tr>
				<th [ngClass]="{desc:orderBy=='Fecha' && orderDirection=='DESC',asc:orderBy=='Fecha' && orderDirection=='ASC'}" (click)="ordenar('Fecha')">Fecha</th>
				<th [ngClass]="{desc:orderBy=='Paciente' && orderDirection=='DESC',asc:orderBy=='Paciente' && orderDirection=='ASC'}" (click)="ordenar('Paciente')">Paciente</th>
				<th [ngClass]="{desc:orderBy=='Doctor' && orderDirection=='DESC',asc:orderBy=='Doctor' && orderDirection=='ASC'}" (click)="ordenar('Doctor')">Doctor</th>
				<th [ngClass]="{desc:orderBy=='Especialidad' && orderDirection=='DESC',asc:orderBy=='Especialidad' && orderDirection=='ASC'}" (click)="ordenar('Especialidad')">Especialidad</th>
				<th >Acciones</th>
			</tr>
		</thead>
		<tbody>
				<tr *ngFor="let i of info_citas" [ngClass]="{cancelada:i.cita.estatus == 'CANCELADA'}">
					<td>{{i.cita.inicio| date: 'short' }}</td>
					<td>{{i.paciente.nombre}}</td>
					<td>{{i.doctor? i.doctor.nombre : ''}}</td>
					<td>{{i.doctor? i.doctor.especialidad : ''}}</td>
					<td>
						<button type="button"  size="small" *ngIf="i.cita.estatus == 'ACTIVA' && i.cita.confirmado_por_paciente=='NO'" (click)="confirmarPaciente(i.cita.id)">
							 <span class="oi" data-glyph="person" title="icon name" aria-hidden="true"></span>
						</button>
						<button type="button"  size="small" *ngIf="i.cita.estatus == 'ACTIVA' && i.cita.confirmado_por_doctor=='NO'" (click)="confirmarDoctor(i.cita.id)">
							 <span class="oi" data-glyph="people" title="icon name" aria-hidden="true"></span>
						</button>
						<button type="button"  size="small" *ngIf="i.cita.estatus == 'ACTIVA'" (click)="cancelar(i.cita.id)">
							 <span class="oi" data-glyph="close-circle-outline" title="icon name" aria-hidden="true"></span>
						</button>
						<button type="button"  size="small" *ngIf="i.cita.estatus == 'CANCELADA'" (click)="activar(i.cita.id)">
							 <span class="oi" data-glyph="checkmark-circle-outline" title="icon name" aria-hidden="true"></span>
						</button>
						<button type="button"  size="small" [routerLink]="['/agregar-centro-medico',i.cita.id]">
							 <span class="oi" data-glyph="create" title="icon name" aria-hidden="true"></span>
						</button>
					</td>
				</tr>
		</tbody>
	</table>
</div>
