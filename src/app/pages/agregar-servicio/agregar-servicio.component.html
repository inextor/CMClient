<div class="card p-3">
	<app-loading [display]="is_loading"></app-loading>
	<div class="container">

		<div class="p-0 mt-3">
			<div class=" mb-3 d-flex justify-content-between flex-wrap">
				<div >
					<h4>{{ id ? 'EDITAR': 'AGREGAR' }} SERVICIO</h4>
				</div>
				<div >
					<button type="button" class="btn btn-primary btn-sm" [disabled]="is_loading" (click)="guardar()">{{ id ? 'Guardar':'Agregar'}}</button>
				</div>
			</div>
		</div>

		<div>
			<div class="form-row">
				<div class="form-group col-md-6">
					<label for="">Nombre del servicio*</label>
					<input placeholder="Nombre" class="form-control" type="text" name="nombre" [(ngModel)]="servicio_recurso.servicio.nombre">
				</div>
				<div class="form-group col-md-6">
					<label for="">Tipo de servicio*</label>
					<select class="form-control" name="tipo" [(ngModel)]="servicio_recurso.servicio.tipo">
						<option [value]="null" selected="selected">Seleccione un servicio</option>
						<option value="SERVICIO">Servicio</option>
						<option value="PRODUCTO_FISICO">Producto Fisico</option>
					</select>
				</div>
			</div>
		</div>

		<div>
			<div class="form-row dropdown">
				<div>
					<label>Producto o Servicio</label>
					<input type="text" name="search_servicio" [(ngModel)]="search" (keyup)="changeSearchServicio($event)" class="form-control">
				</div>
				<div *ngIf="search_servicios.length && search!= ''" class="dropdown-menu show w-100 no-selectable-text">
					<div *ngFor="let servicio of search_servicios;let i=index" (click)="agregarServicio(servicio)">
						<!--div *ngIf="i>0" class="dropdown-divider"></div -->
						<div class="dropdown-item search">
							{{servicio.nombre|uppercase}}
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="p-3">
			Servicios Secundarios {{servicio_recurso.recursos.length}}
			<div *ngFor="let recurso_response of servicio_recurso.recursos" class="row">
				<div class="col-8">
					<label>{{recurso_response.servicio.nombre | titlecase}}</label>
				</div>
				<div class="col-4"><input type="number" [(ngModel)]="recurso_response.recurso.cantidad"></div>
			</div>
		</div>

		<div class="card">
			<table class="basica">
				<tr>
					<td>Centro Medico</td>
					<td *ngFor="let tipo_precio of tipo_precios">{{tipo_precio.nombre}}</td>
				</tr>
				<tr *ngFor="let centro_medico of centros_medicos; index as i">
					<td><b>{{centro_medico.nombre}}</b></td>
					<td *ngFor="let tipo_precio of tipo_precios; index as j">
						<input placeholder="$" type="number" class=" form-control" [name]="i+'-'+j" [(ngModel)]="precios[centro_medico.id][tipo_precio.id].precio">
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>
